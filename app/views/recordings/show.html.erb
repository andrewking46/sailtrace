<% @page_title = "Recording" %>

<% content_for :app_page_header do %>
  <div class="flex-item-justify-start"><%= link_back %></div>
<% end %>

<div class="container">
  <h1>Recording</h1>

  <div id="<%= dom_id @recording %>">
    <div>
      <p><%= @recording.created_at.in_time_zone(@recording.time_zone).strftime("%A, %b %d %Y %l:%M%p") %></p>
      <p>Race: #<%= @recording.race_id %></p>
      <p>Boat: <%= @recording.boat.name %></p>
      <p>Sail number: <%= @recording.boat.sail_number %></p>
      <p>Distance: <%= number_with_precision(@recording.distance, precision: 2) %> nm</p>
      <p>Time: <%= @recording.duration %></p>
      <p>Average Speed: <%= @recording.average_speed %> knots</p>
    </div>

    <div data-controller="static-map"
       data-static-map-recording-id-value="<%= @recording.id %>"
       data-static-map-boat-color-value="<%= @recording.boat.hull_color %>"
       data-action="click->static-map#goToReplay"
       data-static-map-replay-path-value="<%= race_replay_path(@recording.race_id) if @recording.is_race? %>"
       id="static-map" style="height: 400px;">
    </div>
  </div>

  <div>
    <%= link_to "View replay", race_replay_path(@recording.race_id) if @recording.is_race? %> |
    <%= link_to "Back to recordings", recordings_path %>

    <br>
    <br>
    <%= button_to "Destroy this recording", @recording, method: :delete %>
  </div>
</div>
